#RetroDevStudio.MetaData.BASIC:7169,BASIC V7.0,uppercase,10,10
10 GOTO 4000

# DEC("9B")=155
100 M=155
120 K=PEEK(981)

#  BANK
130 B=PEEK(996)

#  START ADDRESS
132 A=PEEK(997)
134 A=PEEK(998)*256+A

140 RETURN




# END 
200 BANK K
210 END


4000 GOSUB 100

#   END ADDRESS
4010 E=PEEK(999)
4020 E=PEEK(1000)*256+E


# UNCOMP GB DESTINATION
#   BANK
4030 D=PEEK(1001)

#   ADDRESS
4040 C=PEEK(1002)
4050 C=PEEK(1003)*256+C

4060 L=0
4070 O=0

# SKIP THE FILETYPE BYTE AT THE BEGINNING ("G")
4080 A=A+1


4090  BANK B
4100  V=PEEK(A)
4110  A=A+1

4120  IF V=M THEN GOSUB4160:GOTO4140
4130  BANK D:GOSUB4240

4140 IF A<E THEN GOTO 4090

4150 GOTO 200


# UNPACK
4160 R=PEEK(A)      :A=A+1
4170 R=PEEK(A)*256+R:A=A+1
4180 V=PEEK(A)      :A=A+1
4190 BANK D
4200 FOR Y = 1 TO R
4210  GOSUB 4240
4220 NEXT
4230 RETURN

#   COPY
4240 O=PEEK(C+L)
4245 POKE C+L,V OR O
4250 L=L+1

4260 RETURN
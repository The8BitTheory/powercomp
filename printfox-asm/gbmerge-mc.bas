#RetroDevStudio.MetaData.BASIC:2049,BASIC V2,uppercase,10,10



# MERGE TWO IMAGES FROM BANK 1 AND PUT THEM INTO BANK 0
#C: DEST ADDRESS (BANK0, AFTER BASIC END)
#D: DEST BANK: 0
500 BANK15:C=PEEK(4624)+PEEK(4625)*256:D=0:C1=C
502 PRINT "DEST - END OF BASIC(C): B0"C

#A: SOURCE ADDRESS (AFTER VARIABLES IN BANK 1)
#B: SOURCE BANK (1)
505 A=PEEK(57)+PEEK(58)*256:B=1
506 PRINT "SOURCE - AFTER VARIABLES: B1"A
#F: MEM-INDEX FIRST IMAGE
#G: MEM-INDEX SECOND IMAGE

510 F=A:G=F+8000

515 I=1:S=TI

# STASH:NR BYTES,RAM-ADDR,REU-ADDR,REU-BANK
# FETCH:NR BYTES,RAM-ADDR,REU-ADDR,REU-BANK

520 SLOW
522 BANK B:STASH 8000,A,0,0
525 BANK D:FETCH 8000,C1,0,0

#515 FAST:DO
#520  BANK B:V1=PEEK(F):REM V2=PEEK(G):V=V1:REM OR V2
#525  BANK D:POKE C,V1
#530  F=F+1:G=G+1:C=C+1
#535 LOOP UNTIL F=A+8000:SLOW

540 BANK D:RTV C1,(I-1)*8000,8000:BANK15

545 A=A+8000:I=I+1:IF I<2 THEN 520

550 S=TI-S:PRINT "MERGE TOOK " S " JIFFIES"




590 RETURN

